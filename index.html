<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Easily Send HTML Email Messages • blastula</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Easily Send HTML Email Messages">
<meta property="og:description" content="Compose and send out responsive HTML email messages that render
    perfectly across a range of email clients and device sizes. Helper functions
    let the user insert embedded images, web link buttons, and ggplot2 plot
    objects into the message body. Messages can be sent through an SMTP
    server, through the RStudio Connect service, or through the Mailgun API
    service &lt;http://mailgun.com/&gt;.">
<meta property="og:image" content="https://rich-iannone.github.io/blastula/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">blastula</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/simple_composition.html">Simple Email Composition</a>
    </li>
    <li>
      <a href="articles/sending_using_smtp.html">Sending Email Using SMTP</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/rich-iannone/blastula">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="blastula-" class="section level1">


<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <strong>blastula</strong> package makes it easy to produce and send HTML email from <strong>R</strong>. The message can have three content areas (the body, the header, and the footer) and we can insert <strong>Markdown</strong> text, block-based components, and even HTML fragments. The underlying HTML/CSS is meant to display properly across a wide range of email clients and webmail services. The resulting email message is responsive so it’ll look great on both large displays and mobile devices.</p>
<div id="composing-an-email-message" class="section level3">
<h3 class="hasAnchor">
<a href="#composing-an-email-message" class="anchor"></a>Composing an Email Message</h3>
<p>When you compose an email, you can use objects from the global workspace and work them into the message content. Let’s create a nicely formatted date/time string (<code>date_time</code>) with the <code><a href="reference/add_readable_time.html">add_readable_time()</a></code> function, and, transform an image on disk to an HTML string object (<code>img_string</code>).</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># Get a nicely formatted date/time string</span>
<span class="no">date_time</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/add_readable_time.html">add_readable_time</a></span>()

<span class="co"># Create an image string using an on-disk</span>
<span class="co"># image file</span>
<span class="no">img_file_path</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(
    <span class="st">"img"</span>, <span class="st">"pexels-photo-267151.jpeg"</span>,
    <span class="kw">package</span> <span class="kw">=</span> <span class="st">"blastula"</span>
  )

<span class="no">img_string</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/add_image.html">add_image</a></span>(<span class="kw">file</span> <span class="kw">=</span> <span class="no">img_file_path</span>)</pre></div>
<p>Now we use the <code><a href="reference/compose_email.html">compose_email()</a></code> function to compose the email. There are three main arguments here: <code>body</code>, <code>header</code>, and <code>footer</code>. You can supply <strong>Markdown</strong> text to any of these content areas to get rendered HTML.</p>
<p>In the example code below, the strings that are part of the email body and the email footer are combined with <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> and, since we have Markdown and HTML fragments, we need to use the <code><a href="reference/md.html">md()</a></code> function.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="no">email</span> <span class="kw">&lt;-</span>
  <span class="fu"><a href="reference/compose_email.html">compose_email</a></span>(
    <span class="kw">body</span> <span class="kw">=</span> <span class="fu"><a href="reference/md.html">md</a></span>(
      <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(
<span class="st">"Hello,

This is a *great* picture I found when looking
for sun + cloud photos:
"</span>,
<span class="no">img_string</span>
      )
    ),
<span class="kw">footer</span> <span class="kw">=</span> <span class="fu"><a href="reference/md.html">md</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(
    <span class="st">"Email sent on "</span>, <span class="no">date_time</span>, <span class="st">"."</span>
  )
)
  )</pre></div>
<p>After creating the email message, we can look at it to ensure that the formatting is as expected. Simply call the object itself and it will be displayed in the Viewer.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="co"># Preview the email</span>
<span class="no">email</span></pre></div>
<p><img src="reference/figures/rstudio_preview_email.png"></p>
</div>
<div id="sending-an-email-message-via-smtp" class="section level3">
<h3 class="hasAnchor">
<a href="#sending-an-email-message-via-smtp" class="anchor"></a>Sending an Email Message via SMTP</h3>
<p>We can store SMTP email credentials in a file using the <code><a href="reference/create_smtp_creds_file.html">create_smtp_creds_file()</a></code> function. This will create a hidden credentials file in the working directory. We can also set SMTP access credentials in the system-wide key-value store through the <code><a href="reference/create_smtp_creds_key.html">create_smtp_creds_key()</a></code> function.</p>
<p>Having generated a credentials file, we can use the <code><a href="reference/smtp_send.html">smtp_send()</a></code> function (along with the <code><a href="reference/credential_helpers.html">creds_file()</a></code> credentials helper function) to send the email through an SMTP server.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co"># Sending email by SMTP using a credentials file</span>
<span class="no">email</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/smtp_send.html">smtp_send</a></span>(
    <span class="kw">to</span> <span class="kw">=</span> <span class="st">"jane_doe@example.com"</span>,
    <span class="kw">from</span> <span class="kw">=</span> <span class="st">"joe_public@example.net"</span>,
    <span class="kw">subject</span> <span class="kw">=</span> <span class="st">"Testing the `smtp_send()` function"</span>,
    <span class="kw">credentials</span> <span class="kw">=</span> <span class="fu"><a href="reference/credential_helpers.html">creds_file</a></span>(<span class="st">"email_creds"</span>)
  )</pre></div>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The <strong>blastula</strong> package can be installed from CRAN with <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"blastula"</span>)</pre></div>
<p>You can install the in-development version of <strong>blastula</strong> from <strong>GitHub</strong> using the <strong>devtools</strong> package.</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"rich-iannone/blastula"</span>)</pre></div>
<p>If you encounter a bug, have usage questions, or want to share ideas to make this package better, feel free to file an <a href="https://github.com/rich-iannone/blastula/issues">issue</a>.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of Conduct</h2>
<p>Please note that the <strong>blastula</strong> project is released with a <a href="https://contributor-covenant.org/version/1/0/0">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p>MIT © Richard Iannone</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=blastula">https://​cloud.r-project.org/​package=blastula</a>
</li>
<li>Browse source code at <br><a href="https://github.com/rich-iannone/blastula/">https://​github.com/​rich-iannone/​blastula/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/rich-iannone/blastula/issues">https://​github.com/​rich-iannone/​blastula/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Richard Iannone <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3925-190X" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Joe Cheng <br><small class="roles"> Author </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://CRAN.R-project.org/package=blastula"><img src="https://www.r-pkg.org/badges/version/blastula" alt="CRAN status"></a></li>
<li><a href="https://travis-ci.org/rich-iannone/blastula"><img src="https://travis-ci.org/rich-iannone/blastula.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/gh/rich-iannone/blastula?branch=master"><img src="https://codecov.io/gh/rich-iannone/blastula/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Richard Iannone, Joe Cheng.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
